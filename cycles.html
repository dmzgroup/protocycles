<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<style>
   body {
      font-family: Monospace;
      background-color: #000000;
      margin: 0px;
      overflow: hidden;
   }
</style>
<head>
<title>Proto Cycles Test</title>
<body>
<script src="3rdparty/Three.js"></script>
<script type="text/javascript">
var camera, scene, renderer, objects;
var particleLight, pointLight;
var mesh;
var loader = new THREE.JSONLoader();

loader.load('./models/lightcycle-purple.json', function colladaReady(collada) {

   mesh = new THREE.Mesh(collada, new THREE.MeshFaceMaterial())

   init();
   render();

});

function init() {

   container = document.createElement('div');
   document.body.appendChild(container);

   scene = new THREE.Scene();

   camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 2000);
   camera.position.set(2, 2, 3);
   scene.add(camera);

   // Grid

   var line_material = new THREE.LineBasicMaterial({ color: 0xcccccc, opacity: 0.2 }),
      geometry = new THREE.Geometry(),
      floor = -0.04, step = 1, size = 14;

   for (var i = 0; i <= size / step * 2; i ++) {

      geometry.vertices.push(new THREE.Vector3(- size, floor, i * step - size));
      geometry.vertices.push(new THREE.Vector3(size, floor, i * step - size));

      geometry.vertices.push(new THREE.Vector3(i * step - size, floor, -size));
      geometry.vertices.push(new THREE.Vector3(i * step - size, floor,  size));
   }

   var line = new THREE.Line(geometry, line_material, THREE.LinePieces);
   scene.add(line);

   scene.add(mesh);

   // Lights

   scene.add(new THREE.AmbientLight(0x1f1f1f));

   var directionalLight = new THREE.DirectionalLight(0xffffff);
   directionalLight.position.x = 100;
   directionalLight.position.y = 100;
   directionalLight.position.z = 0.0;
   scene.add(directionalLight);


   directionalLight = new THREE.DirectionalLight(0xffffff);
   directionalLight.position.x = -100.0;
   directionalLight.position.y = 100;
   directionalLight.position.z = 0.0;
   scene.add(directionalLight);


   renderer = new THREE.WebGLRenderer();
   renderer.setSize(window.innerWidth, window.innerHeight);

   container.appendChild(renderer.domElement);

/*
   stats = new Stats();
   stats.domElement.style.position = 'absolute';
   stats.domElement.style.top = '0px';
   container.appendChild(stats.domElement);
*/

}

function render() {

   requestAnimationFrame(render);
   var timer = Date.now() * 0.0005;

   camera.position.x = Math.cos(timer) * 5;
   camera.position.y = 1;
   camera.position.z = Math.sin(timer) * 5;

   camera.lookAt(scene.position);

   renderer.render(scene, camera);

}

</script>
</body>
</html>
